<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=Edge"><meta http-equiv=permissions-policy content="interest-cohort=()"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#2b7bb5"><meta name=copyright content="Copyright (c)2024 Erik McClure"><meta name=keywords content="games,music,code,erik mcclure,erikmcclure,aurora theory,sweetie bot,discord,feathergui,fading light,tinyoal,cloud hop"><meta name=robots content="index,follow"><meta name=googlebot content="index,follow"><meta name=google-site-verification content="Oxb2ia8HjcHLXlvstA8xPpQO3BO_y15Ds2Ia-feq1MQ"><meta name=generator content="Hugo 0.119.0"><link rel=canonical href=https://erikmcclure.com/blog/><link rel=apple-touch-icon href=https://erikmcclure.com/favicon.ico><link rel="shortcut icon" type=image/x-icon href=https://erikmcclure.com/favicon.ico><link rel=stylesheet href=https://erikmcclure.com/css/main.css><link rel=stylesheet href=https://erikmcclure.com/css/prism.css rel=stylesheet><link rel=stylesheet href=https://erikmcclure.com/css/katex.min.css rel=stylesheet><link rel=stylesheet href=https://erikmcclure.com/css/fontawesome.min.css><link rel=stylesheet href=https://erikmcclure.com/css/regular.min.css><link rel=stylesheet href=https://erikmcclure.com/css/brands.min.css><link rel=stylesheet href=https://erikmcclure.com/css/solid.min.css><link rel=alternate type=application/rss+xml title="Erik McClure - RSS" href=https://erikmcclure.com/blog/index.xml><meta property="og:type" content="website"><title>Blogs - Erik McClure</title><meta property="og:title" content="Blogs - Erik McClure"><meta name=twitter:title content="Blogs - Erik McClure"><meta itemprop=name content="Blogs - Erik McClure"><meta name=description content="Applied mathematician and software architect who occasionally writes music."><meta property="og:description" content="Applied mathematician and software architect who occasionally writes music."><meta name=twitter:description content="Applied mathematician and software architect who occasionally writes music."><meta itemprop=description content="Applied mathematician and software architect who occasionally writes music."><meta property="og:url" content="https://erikmcclure.com/"><meta property="og:site_name" content="Erik McClure"><meta property="og:image" content="https://erikmcclure.com/img/avatar.png"><meta property="og:locale" content="en-US"><meta property="article:author" content="Erik McClure"><meta name=twitter:card content="summary"><meta name=twitter:site content="@erikmcclure0173"><meta name=twitter:creator content="@erikmcclure0173"><meta name=twitter:image content="https://erikmcclure.com/img/avatar.png"><meta name=twitter:dnt content="on"><link href=https://plus.google.com/104896885003230920472 rel=publisher><meta itemprop=image content="https://erikmcclure.com/img/avatar.png"><meta name=last-updated content="20240101-17:30:00.000"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-63026815-3"></script>
<script defer src=https://erikmcclure.com/syntax-prism.js></script>
<script defer src=https://erikmcclure.com/katex.min.js></script>
<script defer src=https://erikmcclure.com/mathtex-script-type.min.js></script>
<script defer src=https://erikmcclure.com/auto-render.min.js></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-63026815-3")</script></head><body><div id=container><header><nav><ul><li><a href=/blog/ title=Blog><i class="fa-solid fa-book fa-fw fa-lg"></i>&nbsp;<p>Blog</p></a></li><li><a href=/projects/ title=Projects><i class="fa-solid fa-briefcase fa-fw fa-lg"></i>&nbsp;<p>Projects</p></a></li><li><a href=https://erikmcclure.bandcamp.com title=Bandcamp><i class="fa-brands fa-bandcamp fa-fw fa-lg"></i>&nbsp;<p>Bandcamp</p></a></li><li><a href=https://github.com/erikmcclure title=Github><i class="fa-brands fa-github fa-fw fa-lg"></i>&nbsp;<p>Github</p></a></li><li><a href=/web/ title=Websites><i class="fa-solid fa-globe fa-fw fa-lg"></i>&nbsp;<p>Websites</p></a></li></ul></nav><div class=dim><h1>Erik McClure</h1></div></header><main class=blog><section><article><h4><a href=/blog/sexist-programmers-are-awful-engineers/>Sexist Programmers Are Awful Engineers</a></h4><hr><div class=padding><p>Men and women <a href=https://stanmed.stanford.edu/2017spring/how-mens-and-womens-brains-are-different.html>are fundamentally different</a>. So are white people and black people and autistic people and gay people and transgender people and conservatives and liberals and every other human being along every imaginable axis of discrimination. Some of these differences are cultural. Others are genetic. Others depend on environmental factors. These differences mean that some of us are inherently better at certain tasks than others. On average, men are better at spatial temporal reasoning, women are better at reading comprehension and writing ability, and <a href=https://www.forbes.com/sites/jeffbercovici/2011/06/14/why-some-psychopaths-make-great-ceos/#749d149f261a>psychopaths can sometimes be excellent CEOs</a>.</p><p>Whenever I meet a programmer who insists on doing everything a certain way, the chances I&rsquo;ll hire them drop off a cliff. Just as object-oriented programming didn&rsquo;t fix everything, neither will functional programming, or data-oriented programming or array-based programming or any other language. They are different tools that allow you to attack a problem from different directions, much like we have different classes of algorithms to attack certain classes of problems. Greedy algorithms, lazy evaluation, dynamic programming, recursive-descent, maximum flow, all of these are different ways to approach a problem. They represent looking at a problem from <em>different perspectives</em>. A problem that is difficult from one angle might be trivial when examined from a different angle.</p><p>When I stumbled upon this <a href=http://gizmodo.com/exclusive-heres-the-full-10-page-anti-diversity-screed-1797564320>anti-diversity memo written by a Google employee</a>, I wonder just how dysfunctional of an engineer that person is. Problems are never solved by being closed-minded. They are solved by opening ourselves to new possibilities and exploring the problem space as an infinitely-dimensional fabric of possible configurations. You do not find possible edge-cases by being closed-minded. You find them by probing the outer edges of your solution, trying to find singularities and inflection points that hint at unusual behavior.</p><p>You cannot build a great company by hiring people who are good at the same things you are. Attempting to maximize diversity only comes at a perceived cost of aptitude if you are measuring the wrong things. If your concept of what makes a &ldquo;good programmer&rdquo; is an extremely narrow set of skills, then you will inevitably select towards a specific ethnicity, culture, or sex, because the tiny statistical differences will be grossly magnified by the extremely narrow job requirements. Demand that all your programmers invert a binary tree on a whiteboard and you&rsquo;ll filter out <a href="https://twitter.com/mxcl/status/608682016205344768?lang=en">the guy who wrote the software 90% of your company uses</a>.</p><p>If you think the field of computer science is really this narrow, you&rsquo;re a terrible programmer. Turing completeness is a fundamental property of the universe, and we are only just beginning to explore the full implications of information theory, the foundations of type theory, NP-completeness, and the nature of computation itself. Disregarding other people because they can&rsquo;t do something without ever considering what they can do will only hurt your team, and your company. Diversity inclusion programs shouldn&rsquo;t try to hire more women and ethnic groups because they&rsquo;re the same, they should be trying to hire them <em>because they are different</em>.</p><p>When hiring someone to complete a job, you should hire whoever is the best fit for the job. In a vacuum where there is a single task that needs to be completed, gender and ethnicity should be ignored in favor of a purely meritocratic assessment. However, if you have a company that must respond to a changing world, diversity can reveal solutions you never even knew existed. An established company like Google must actively seek to increase diversity so that it can explore new perspectives that may give it an edge over its rivals. They cannot select on a purely meritocratic basis, because all measures of merit would be based on what the company is <em>already good at</em>, not what it could be good at. You cannot explore new opportunities by hiring the same people.</p><p>Intelligent people value feedback from people who think differently than them. This is why many executives will deliberately hire people they disagree with so they can have someone challenge their views. This helps avoid creating an echo-chamber, which is the ultimate irony of a memo that&rsquo;s called &ldquo;Googleâ€™s Ideological Echo Chamber&rdquo;, because scrapping the diversity inclusion programs as the memo suggests would itself create a new echo-chamber. You can&rsquo;t remove an echo-chamber by removing diversity - the author&rsquo;s premise is self-defeating. If they had stuck with only claiming that conservative ideologies should not be discriminated against, they would have been correct. Unfortunately, telling everyone they shouldn&rsquo;t discriminate against your perspective, which itself involves discriminating against other perspectives, is by definition a contradiction.</p><p>We aren&rsquo;t going to write better programs by doing the same thing we&rsquo;ve been doing for the past 10 years. To improve is to change, and those who seek to become better software engineers must themselves embrace change, or they will be left behind to rot in the sewers of forgotten programs, maintaining rancid enterprise code for the rest of their lives. If we are unwilling to change who is writing the programs, we&rsquo;ll be stuck making the same thing over and over again. A business that thinks nothing needs to change is one ripe for disruption. If you really think only hiring white males who correctly answer all your questions about graph theory and B-trees will help your business in the long-term, you&rsquo;re an idiot.</p></div><hr><time itemprop=datePublished pubdate=pubdate datetime=2017-08-06T12:20:00+00:00><i class="fa-regular fa-clock fa-fw"></i>&nbsp;Published on <a href=https://erikmcclure.com/blog/sexist-programmers-are-awful-engineers/>August 6, 2017 at 12:20pm</a></time><aside><a href=/blog/sexist-programmers-are-awful-engineers/#comments><i class="fa-regular fa-comments fa-fw"></i>&nbsp;0 comments</a></aside><aside><i class="fa-regular fa-share-square fa-fw"></i>&nbsp;share:<ul><li><a href="javascript:window.open('https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ferikmcclure.com%2fblog%2fsexist-programmers-are-awful-engineers%2f','popup','width=600,height=400');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><path class="st0" d="M16.75 9H13.5V7a1 1 0 011-1h2V3H14a4 4 0 00-4 4V9H8v3h2v9h3.5V12H16z"/></svg></a><li><a href="javascript:window.open('https://twitter.com/intent/tweet?text=Sexist%20Programmers%20Are%20Awful%20Engineers&url=https%3a%2f%2ferikmcclure.com%2fblog%2fsexist-programmers-are-awful-engineers%2f','popup','width=600,height=256');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><path class="st0" opacity="0" d="M0 0h24v24H0z"/><path class="st0" d="M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572.0-4.658 2.086-4.658 4.66.0.364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342.0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.392.106-.803.162-1.227.162-.3.0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376.0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57.0 13.255-7.098 13.255-13.254.0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"/></svg></a></li><li><a href="javascript:window.open('https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2ferikmcclure.com%2fblog%2fsexist-programmers-are-awful-engineers%2f','popup','width=700,height=380');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><rect class="st0" height="11" width="4" x="3" y="9"/><circle class="st0" cx="5" cy="5" r="2"/><path class="st0" d="M16.5 8.25A4.47251 4.47251.0 0013 9.95343V9H9V20h4V13a2 2 0 014 0v7h4V12.75a4.5 4.5.0 00-4.5-4.5z"/></svg></a></li></ul></aside></article><article><h4><a href=/blog/why-i-never-built-my-soundcloud-killer/>Why I Never Built My SoundCloud Killer</a></h4><hr><div class=padding><p>While the news of SoundCloud imploding are fairly recent, musicians and producers have had a beef with the music uploading site&rsquo;s direction for years. I still remember when SoundCloud only gave you a paltry 2 hours worth of free upload time and managed to convert my high quality lossless WAV files to the shittiest 128 kbps MP3 I&rsquo;ve ever heard in my life. What really pissed me off was that they demanded a ridiculous $7 a month just to <em>double</em> your upload time. This is in contrast to <a href=http://www.newgrounds.com/audio/>Newgrounds</a>, a tiny website run by a dozen people with an audio portal built almost as an afterthought that still manages to be superior to <em>every single other offering</em>. It gives you unlimited space, for free, and lets you upload <em>your own MP3</em>, which allows me to upload properly encoded joint-stereo 128 kbps MP3 files, or much higher quality MP3s for songs I&rsquo;m giving out for free.</p><p>Obviously, Newgrounds is only able to offer unlimited free uploads because the audio portal just piggybacks on the rest of the site. However, I was so pissed off at SoundCloud&rsquo;s disgusting subscription offering that I actually ran the numbers in terms of what it would cost to store lossless FLAC encodings of songs using Amazon S3. These calculations are now out of date, so I&rsquo;ve redone them for the purposes of this blog.</p><p>The average size of an FLAC encoded song is around 60 MB, but we&rsquo;ll assume it&rsquo;s 80 MB as an upper-bound, and to include the cost of storing the joint-stereo 128 kbps streaming MP3, which is usually less than 10% the size (using OPUS would reduce this even more, but it is not supported on all browsers yet). Amazon offers the first 50 TB of storage at $0.023 per gigabyte, per month. This comes down to about $0.00184 per month, per song, in order to store the full uncompressed version. Now, obviously, we must also stream the song, but we&rsquo;re only streaming the low-quality version, which is 10% the size, which is about 7 MB in our example (7 MB + 70 MB is about 80 MB for storage). The vast majority of music producers on the website have almost no following, and most will be lucky to get a single viral hit. As an example, after being on SoundCloud for over 7 years, I have managed to amass a mere 100000 views <em>total</em>. If I somehow got 20000 views of my songs <em>every single month</em>, the total cost of streaming 140 GB from Amazon S3 at $0.05 per GB would be $7 per month. That&rsquo;s how much SoundCloud is charging just to double my storage space!</p><p>This makes even less sense when you calculate that 6 hours of FLAC would be 4.7 GB, or about 5 GB including the 128 kbps streaming MP3s. 5 GB of <em>storage space</em> costs a pathetic <strong>$0.12 cents a month</strong> to store on Amazon S3! All of the costs come down to <em>bandwidth</em>, which is relatively fixed by how many people are listening to songs, not how many songs there are. This means, if I&rsquo;m paying any music service for the right to store music on their servers, I should get <em>near unlimited storage space</em> (maybe put in a sanity check of 10 GB max per month to limit abuse). I will point out that <a href=https://clyp.it/premium-pricing>Clyp.it actually does this properly</a>, giving you 6 hours of storage space for free and unlimited storage space if you pay them $6 a month.</p><p>Unfortunately, Clyp.it does not try to be SoundCloud as it has no comments, no reshares, and well, not much of anything, really. It&rsquo;s like a giant pastebin for sounds where you can follow people or favorite things. <strong>It&rsquo;s also probably screwed.</strong></p><p>Even though I had a name and a website design, I never launched it because even if I could find a way to identify a copyrighted song via some sort of ContentID system, I couldn&rsquo;t make it work without the record industry&rsquo;s cooperation. The problem is that the system has to know what songs are illegal in order to block them in the first place. Otherwise, people could upload Justin Bieber songs with impunity and I&rsquo;d still get sued out of existence. The hard part about making a site like SoundCloud isn&rsquo;t actually making the website, it&rsquo;s dealing with the insane, litigation-happy oligarchs that own the entire music industry.</p><p>SoundCloud&rsquo;s ordeal is <a href=https://www.buzzfeed.com/ryanmac/inside-the-storm-at-soundcloud>mentioned in this article</a>. Surprisingly, it took until 2012 for them to realize they had to start making deals with the major music labels. It took until 2014 for many of those deals to actually happen, and they were not in SoundCloud&rsquo;s favor. A deal with Warner Music Group, closed in 2014, gave Warner a <strong>3-5% stake in the company</strong> and an undisclosed cut of ad-revenue, just so SoundCloud could have the privilege of <em>not being sued out of existence</em>. This wasn&rsquo;t even an investment round, it was just so SoundCloud could have Warner Music Group&rsquo;s catalog on the site and not get sued!</p><p>At this point, you have to be either very naive or very rich to go up against an industry that can and will send an army of lawyers after you. The legal system is not in your favor. It will be used to crush you like a bug and there is nothing you can do about it, because of one fundamental problem: <strong>You can&rsquo;t detect copyright infringement without access to the original copy</strong>.</p><p>Because of this, the music industry holds the entire world hostage with a kind of Catch-22: They demand you take down all copyright infringing material, but in order to figure out if something is copyright infringement, you need access to <em>their</em> songs, which they only give out on <em>their</em> terms, which are never in your favor.</p></div><hr><time itemprop=datePublished pubdate=pubdate datetime=2017-07-30T16:57:00+00:00><i class="fa-regular fa-clock fa-fw"></i>&nbsp;Published on <a href=https://erikmcclure.com/blog/why-i-never-built-my-soundcloud-killer/>July 30, 2017 at 4:57pm</a></time><aside><a href=/blog/why-i-never-built-my-soundcloud-killer/#comments><i class="fa-regular fa-comments fa-fw"></i>&nbsp;3 comments</a></aside><aside><i class="fa-regular fa-share-square fa-fw"></i>&nbsp;share:<ul><li><a href="javascript:window.open('https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ferikmcclure.com%2fblog%2fwhy-i-never-built-my-soundcloud-killer%2f','popup','width=600,height=400');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><path class="st0" d="M16.75 9H13.5V7a1 1 0 011-1h2V3H14a4 4 0 00-4 4V9H8v3h2v9h3.5V12H16z"/></svg></a><li><a href="javascript:window.open('https://twitter.com/intent/tweet?text=Why%20I%20Never%20Built%20My%20SoundCloud%20Killer&url=https%3a%2f%2ferikmcclure.com%2fblog%2fwhy-i-never-built-my-soundcloud-killer%2f','popup','width=600,height=256');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><path class="st0" opacity="0" d="M0 0h24v24H0z"/><path class="st0" d="M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572.0-4.658 2.086-4.658 4.66.0.364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342.0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.392.106-.803.162-1.227.162-.3.0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376.0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57.0 13.255-7.098 13.255-13.254.0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"/></svg></a></li><li><a href="javascript:window.open('https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2ferikmcclure.com%2fblog%2fwhy-i-never-built-my-soundcloud-killer%2f','popup','width=700,height=380');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><rect class="st0" height="11" width="4" x="3" y="9"/><circle class="st0" cx="5" cy="5" r="2"/><path class="st0" d="M16.5 8.25A4.47251 4.47251.0 0013 9.95343V9H9V20h4V13a2 2 0 014 0v7h4V12.75a4.5 4.5.0 00-4.5-4.5z"/></svg></a></li></ul></aside></article><article><h4><a href=/blog/integrating-luajit-and-autogenerating-c/>Integrating LuaJIT and Autogenerating C Bindings In Visual Studio</a></h4><hr><div class=padding><p><a href=https://www.lua.org/>Lua</a> is a popular scripting language due to its tight integration with C. <a href=http://luajit.org/>LuaJIT</a> is an extremely fast JIT compiler for Lua that can be integrated into your game, which also provides an <a href=http://luajit.org/ext_ffi.html>FFI Library</a> that directly interfaces with C functions, eliminating most overhead. However, the FFI library only accepts a subset of the C standard. Specifically, <strong>&ldquo;C declarations are not passed through a C pre-processor, yet. No pre-processor tokens are allowed, except for #pragma pack.&rdquo;</strong> The website suggests running the header file through a preprocesser stage, but I have yet to find a LuaJIT tutorial that actually explains how to do this. Instead, all the examples simply copy+paste the function prototype into the Lua file itself. Doing this with makefiles and GCC is trivial, because you just have to add a compile step using <a href=https://gcc.gnu.org/onlinedocs/gcc-4.9.1/gcc/Preprocessor-Options.html>the <code>-E</code> option</a>, but integrating this with Visual Studio is more difficult. In addition, I&rsquo;ll show you how to properly load scripts and modify the PATH lookup variable so your game can have a proper <code>scripts</code> folder instead of dumping everything in <code>bin</code>.</p><h5 id=compilation>Compilation</h5><p>To begin, we need to <a href=http://luajit.org/download.html>download LuaJIT</a> and get it to actually compile. Doing this manually isn&rsquo;t too difficult, simply open an x64 Native Tools Command Prompt (or x86 Native Tools if you want 32-bit), navigate to <code>src/msvcbuild.bat</code> and run <code>msvcbuild.bat</code>. The default options will build an x64 or x86 dll with dynamic linking to the CRT. If you want a static lib file, you need to run it with the <code>static</code> option. If you want static linking to the CRT so you don&rsquo;t have to deal with that annoying Visual Studio Runtime Library crap, you&rsquo;ll have to modify the .bat file directly. Specifically, you need to find <code>%LJCOMPILE% /MD</code> and change it to <code>%LJCOMPILE% /MT</code>. This will then compile the static lib or dll with static CRT linking to match your other projects.</p><p>This is a bit of a pain, and recently I&rsquo;ve been trying to automate my build process and dependencies using <a href=https://github.com/Microsoft/vcpkg>vcpkg</a> to act as a C++ package manager. A port of LuaJIT is included in the latest update of vcpkg, but if you want one that always statically links to the CRT, you can <a href=https://github.com/Black-Sphere-Studios/vcpkg/tree/master/ports/luajit>get it here</a>.</p><p>An important note: the build instructions for LuaJIT state that you should copy the lua scripts contained in <code>src/jit</code> to your application folder. What it doesn&rsquo;t mention is that this is <em>optional</em> - those scripts contain debugging instructions for the JIT engine, which you probably don&rsquo;t need. It will work just fine without them.</p><p>Once you have LuaJIT built, you should add it&rsquo;s library file to your project. This library file is called <strong>lua51.lib</strong> (and the dll is <strong>lua51.dll</strong>), because LuaJIT is designed as a drop-in replacement for the default Lua runtime. Now we need to actually load Lua in our program and integrate it with our code. To do this, use <code>lua_open()</code>, which returns a <code>lua_State*</code> pointer. You will need that <code>lua_State*</code> pointer for everything else you do, so store it somewhere easy to get to. If you are building a game using an Entity Component System, it makes sense to build a <code>LuaSystem</code> that stores your <code>lua_State*</code> pointer.</p><h5 id=initialization>Initialization</h5><p>The next step is to load in all the standard Lua libraries using <code>luaL_openlibs(L)</code>. Normally, you shouldn&rsquo;t do this if you need script sandboxing for player-created scripts. However, <strong>LuaJIT&rsquo;s FFI library is inherently unsafe</strong>. Any script with access to the FFI library can call any kernel API it wants, so you should be extremely careful about using LuaJIT if this is a use-case for your game. We can also register any C functions we want to the old-fashioned way via <code>lua_register</code>, but this is only useful for functions that don&rsquo;t have C analogues (due to having multiple return values, etc).</p><p>There is one function in particular that you probably want to overload, and that is the <code>print()</code> function. By default, Lua will simply print to standard out, but if you aren&rsquo;t redirecting standard out to your in-game console, you probably have your own <code>std::ostream</code> (or even a custom stream class) that is sent all log messages. By overloading <code>print()</code>, we can have our Lua scripts automatically write to both our log file and our in-game console, which is extremely useful. Here is a complete re-implementation of <code>print</code> that outputs to an arbitrary <code>std::ostream&</code> object:<pre class=language-cpp><code>int PrintOut(lua_State *L, std::ostream&amp; out)
{
  int n = lua_gettop(L);  /* number of arguments */
  if(!n)
    return 0;
  int i;
  lua_getglobal(L, &#34;tostring&#34;);
  for(i = 1; i &lt;= n; i++)
  {
    const char *s;
    lua_pushvalue(L, -1);  /* function to be called */
    lua_pushvalue(L, i);   /* value to print */
    lua_call(L, 1, 1);
    s = lua_tostring(L, -1);  /* get result */
    if(s == NULL)
      return luaL_error(L, LUA_QL(&#34;tostring&#34;) &#34; must return a string to &#34;
        LUA_QL(&#34;print&#34;));
    if(i &gt; 1) out &lt;&lt; &#34;\t&#34;;
    out &lt;&lt; s;
    lua_pop(L, 1);  /* pop result */
  }
  out &lt;&lt; std::endl;
  return 0;
}
</code></pre>To overwrite the existing <code>print</code> function, we need to first define a Lua compatible shim function. In this example, I pass <code>std::cout</code> as the target stream:</p><p><pre class=language-cpp><code>int lua_Print(lua_State *L)
{
  return PrintOut(L, std::cout);
}
</code></pre>Now we simply register our <code>lua_Print</code> function using <code>lua_register(L, "print", &amp;lua_Print)</code>. If we were doing this in a <code>LuaSystem</code> object, our constructor would look like this:</p><p><pre class=language-cpp><code>LuaSystem::LuaSystem()
{
  L = lua_open();
  luaL_openlibs(L);
  lua_register(L, &#34;print&#34;, &amp;lua_Print);
}
</code></pre>To clean up our Lua instance, we need to both trigger a final GC iteration to clean up any dangling memory, and then we call <code>lua_close(L)</code>, so our destructor would look like this:<pre class=language-cpp><code>LuaSystem::~LuaSystem()
{
  lua_gc(L, LUA_GCCOLLECT, 0);
  lua_close(L);
  L = 0;
}
</code></pre></p><h5 id=loadings-scripts-via-require>Loadings Scripts via Require</h5><p>At this point most tutorials skip to the part where you load a Lua script and write &ldquo;Hello World&rdquo;, but we aren&rsquo;t done yet. Integrating Lua into your game means loading scripts and/or arbitrary strings as Lua code while properly resolving dependencies. If you don&rsquo;t do this, any one of your scripts that relies on another script will have to do <code>require("full/path/to/script.lua")</code>. We also face another problem - if we want to have a <code>scripts</code> folder where we simply automatically load every single script into our workspace, simply loading them all can cause duplicated code, because <code>luaL_loadfile</code> does <em>not</em> have any knowledge of <code>require</code>. You can solve this by simply loading a single <code>bootstrap.lua</code> script which then loads all your game&rsquo;s scripts via <code>require</code>, but we&rsquo;re going to build a much more robust solution.</p><p>First, we need to modify Lua&rsquo;s <code>PATH</code> variable, or the variable that controls where it looks up scripts relative to our current directory. This function will append a path (which should be of the form <code>"path/to/scripts/?.lua"</code>) to the beginning of the <code>PATH</code> variable, giving it highest priority, which you can then use to add as many <code>script</code> directories as you want in your game, and any lua script from any of those folders will then be able to <code>require()</code> a script from any other folder in <code>PATH</code> without a problem. Obviously, you should probably only add one or two folders, because you don&rsquo;t want to deal with potential name conflicts in your script files.<pre class=language-cpp><code>int AppendPath(lua_State *L, const char* path)
{
  lua_getglobal(L, &#34;package&#34;);
  lua_getfield(L, -1, &#34;path&#34;); // get field &#34;path&#34; from table at top of stack (-1)
  std::string npath = path;
  npath.append(&#34;;&#34;);
  npath.append(lua_tostring(L, -1)); // grab path string from top of stack
  lua_pop(L, 1);
  lua_pushstring(L, npath.c_str());
  lua_setfield(L, -2, &#34;path&#34;); // set the field &#34;path&#34; in table at -2 with value at top of stack
  lua_pop(L, 1); // get rid of package table from top of stack
  return 0;
}
</code></pre>Next, we need a way to load all of our scripts using <code>require()</code> so that Lua properly resolves the dependencies. To do this, we create a function in C that literally calls the <code>require()</code> function for us:<pre class=language-cpp><code>int Require(lua_State *L,const char *name)
{
  lua_getglobal(L, &#34;require&#34;);
  lua_pushstring(L, name);
  int r = lua_pcall(L, 1, 1, 0);
  if(!r)
    lua_pop(L, 1);
  WriteError(L, r, std::cout);
  return r;
}
</code></pre>By using this to load all our scripts, we don&rsquo;t have to worry about loading them in any particular order - <code>require</code> will ensure everything gets loaded correctly. An important note here is <code>WriteError()</code>, which is a generic error handling function that processes Lua errors and writes them to a log. All errors in lua will return a nonzero error code, and will <em>usually</em> push a string containing the error message to the stack, which must then be popped off, or it&rsquo;ll mess things up later.<pre class=language-cpp><code>void WriteError(lua_State *L, int r, std::ostream&amp; out)
{
  if(!r)
    return;
  if(!lua_isnil(L, -1)) // Check if a string was pushed
  {
    const char* m = lua_tostring(L, -1);
    out &lt;&lt; &#34;Error &#34; &lt;&lt; r &lt;&lt; &#34;: &#34; &lt;&lt; m &lt;&lt; std::endl;
    lua_pop(L, 1);
  }
  else
    out &lt;&lt; &#34;Error &#34; &lt;&lt; r &lt;&lt; std::endl;
}
</code></pre></p><h5 id=automatic-c-binding-generation>Automatic C Binding Generation</h5><p>Fantastic, now we&rsquo;re all set to load up our scripts, but we still need to somehow define a header file and also load that header file into LuaJIT&rsquo;s FFI library so our scripts have direct access to our program&rsquo;s exposed C functions. One way to do this is to just copy+paste your C function definitions into a Lua file in your scripts folder that is then automatically loaded. This, however, is a pain in the butt and is error-prone. We want to have a <em>single source of truth</em> for our function definitions, which means defining our entire LuaJIT C API in a single header file, which is then loaded directly into LuaJIT. Predictably, we will accomplish this by abusing the C preprocessor:</p><p><pre class=language-cpp><code>#ifndef __LUA_API_H__
#define __LUA_API_H__

#ifndef LUA_EXPORTS
#define LUAFUNC(ret, name, ...) ffi.cdef[[ ret lua_##name(__VA_ARGS__); ]]; name = ffi.C.lua_##name
local ffi = require(&#34;ffi&#34;)
ffi.cdef[[ // Initial struct definitions
#else
#define LUAFUNC(ret, name, ...) ret __declspec(dllexport) lua_##name(__VA_ARGS__)
extern &#34;C&#34; { // Ensure C linkage is being used
#endif

struct GameInfo
{
  uint64_t DashTail;
  uint64_t MaxDash;
};

typedef const char* CSTRING; // VC++ complains about having const char* in macros, so we typedef it here

#ifndef LUA_EXPORTS
]] // End struct definitions
#endif

  LUAFUNC(CSTRING, GetGameName);
  LUAFUNC(CSTRING, IntToString, int);
  LUAFUNC(void, setdeadzone, float);

#ifdef Everglade_EXPORTS
}
#endif

#endif
</code></pre>The key idea here is to use macros such that, when we pass this through the preprocessor <em>without</em> any predefined constants, it will magically turn into a valid Lua script. However, when we compile it in our C++ project, our project defines <code>LUA_EXPORTS</code>, and the result is a valid C header. Our C <code>LUAFUNC</code> is set up so that we&rsquo;re using C linkage for our structs and functions, and that we&rsquo;re <em>exporting the function</em> via <code>__declspec(dllexport)</code>. This obviously only works for Visual Studio so you&rsquo;ll want to set up a macro for the GCC version, but I will warn you that VC++ got really cranky when i tried to use a macro for that in my code, so you may end up having to redefine the entire <code>LUAFUNC</code> macro for each compiler.</p><p>At this point, we have a bit of a choice to make. It&rsquo;s more convenient to have the C functions available in the global namespace, which is what this script does, because this simplifies calling them from an interactive console. However, <strong>using <code>ffi.C.FunctionName</code> is significantly faster</strong>. Technically the fastest way is declaring <code>local C = ffi.C</code> at the top of a file and then calling the functions via <code>C.FunctionName</code>. Luckily, importing the functions into the global namespace does not preclude us from using the &ldquo;fast&rdquo; way of calling them, so our script here imports them into the global namespace for ease of use, but in our scripts we can use the <code>C.FunctionName</code> method instead. Thus, when outputting our Lua script, our <code>LUAFUNC</code> macro wraps our function definition in a LuaJIT <code>ffi.cdef</code> block, and then runs a <em>second</em> Lua statement that brings the function into the global namespace. This is why we have an initial <code>ffi.cdef</code> code block for the structs up top, so we can include that second lua statement after each function definition.</p><p>Now we need to set up our compilation so that Visual Studio generates this file without any predefined constants and outputs the resulting lua script to our <code>scripts</code> folder, where our other in-game scripts can automatically load it from. We can accomplish this using a Post-Build Event (under Configuration Properties -> Build Events -> Post-Build Event), which then runs the following code:<pre class=language-cil><code>CL LuaAPI.h /P /EP /u
COPY &#34;LuaAPI.i&#34; &#34;../bin/your/script/folder/LuaAPI.lua&#34; /Y
</code></pre>Visual Studio can sometimes be finicky about that newline, but if you put in two statements on two separate lines, it should run both commands sequentially. You may have to edit the project file directly to convince it to actually do this. The key line here is <code>CL LuaAPI.h /P /EP /u</code>, which tells the compiler to preprocess the file and output it to a <code>*.i</code> file. There is no option to configure the output file, it will always be the exact same file but with a <code>.i</code> extension, so we have to copy and rename it ourselves to our scripts folder using the <code>COPY</code> command.</p><h5 id=loading-and-calling-lua-code>Loading and Calling Lua Code</h5><p>We are now set to load all our lua scripts in our script folder via <code>Require</code>, but what if we want an interactive Lua console? There are lua functions that read strings, but to make this simpler, I will provide a function that loads a lua script from an arbitrary <code>std::istream</code> and outputs to an arbitrary <code>std::ostream</code>:<pre class=language-cpp><code>const char* _luaStreamReader(lua_State *L, void *data, size_t *size)
{
  static char buf[CHUNKSIZE];
  reinterpret_cast&lt;std::istream*&gt;(data)-&gt;read(buf, CHUNKSIZE);
  *size = reinterpret_cast&lt;std::istream*&gt;(data)-&gt;gcount();
  return buf;
}

int Load(lua_State *L, std::istream&amp; s, std::ostream&amp; out)
{
  int r = lua_load(L, &amp;_luaStreamReader, &amp;s, 0);

  if(!r)
  {
    r = lua_pcall(L, 0, LUA_MULTRET, 0);
    if(!r)
      PrintOut(L, out);
  }

  WriteError(L, r, out);
  return r;
}
</code></pre>Of course, the other question is how to call Lua functions from our C++ code directly. There are many, <em>many</em> different implementations of this available, of varying amounts of safety and completeness, but to get you started, here is a very simple implementation in C++ using templates. Note that this does not handle errors - you can change it to use <code>lua_pcall</code> and check the return code, but <a href=http://www.knightsgame.org.uk/blog/2012/09/03/notes-on-luac-error-handling/>handling arbitrary Lua errors is nontrivial</a>.<pre class=language-cpp><code>template&lt;class T, int N&gt;
struct LuaStack;

template&lt;class T&gt; // Integers
struct LuaStack&lt;T, 1&gt;
{
  static inline void Push(lua_State *L, T i) { lua_pushinteger(L, static_cast&lt;lua_Integer&gt;(i)); }
  static inline T Pop(lua_State *L) { T r = (T)lua_tointeger(L, -1); lua_pop(L, 1); return r; }
};
template&lt;class T&gt; // Pointers
struct LuaStack&lt;T, 2&gt;
{
  static inline void Push(lua_State *L, T p) { lua_pushlightuserdata(L, (void*)p); }
  static inline T Pop(lua_State *L) { T r = (T)lua_touserdata(L, -1); lua_pop(L, 1); return r; }
};
template&lt;class T&gt; // Floats
struct LuaStack&lt;T, 3&gt;
{
  static inline void Push(lua_State *L, T n) { lua_pushnumber(L, static_cast&lt;lua_Number&gt;(n)); }
  static inline T Pop(lua_State *L) { T r = static_cast&lt;T&gt;(lua_touserdata(L, -1)); lua_pop(L, 1); return r; }
};
template&lt;&gt; // Strings
struct LuaStack&lt;std::string, 0&gt;
{
  static inline void Push(lua_State *L, std::string s) { lua_pushlstring(L, s.c_str(), s.size()); }
  static inline std::string Pop(lua_State *L) { size_t sz; const char* s = lua_tolstring(L, -1, &amp;sz); std::string r(s, sz); lua_pop(L, 1); return r; }
};
template&lt;&gt; // Boolean
struct LuaStack&lt;bool, 1&gt;
{
  static inline void Push(lua_State *L, bool b) { lua_pushboolean(L, b); }
  static inline bool Pop(lua_State *L) { bool r = lua_toboolean(L, -1); lua_pop(L, 1); return r; }
};
template&lt;&gt; // Void return type
struct LuaStack&lt;void, 0&gt; { static inline void Pop(lua_State *L) { } };

template&lt;typename T&gt;
struct LS : std::integral_constant&lt;int, 
  std::is_integral&lt;T&gt;::value + 
  (std::is_pointer&lt;T&gt;::value * 2) + 
  (std::is_floating_point&lt;T&gt;::value * 3)&gt;
{};

template&lt;typename R, int N, typename Arg, typename... Args&gt;
inline R _callLua(const char* function, Arg arg, Args... args)
{
  LuaStack&lt;Arg, LS&lt;Arg&gt;::value&gt;::Push(_l, arg);
  return _callLua&lt;R, N, Args...&gt;(function, args...);
}
template&lt;typename R, int N&gt;
inline R _callLua(const char* function)
{
  lua_call(_l, N, std::is_void&lt;R&gt;::value ? 0 : 1);
  return LuaStack&lt;R, LS&lt;R&gt;::value&gt;::Pop(_l);
}

template&lt;typename R, typename... Args&gt;
inline R CallLua(lua_State *L, const char* function, Args... args)
{
  lua_getglobal(L, function);
  return _callLua&lt;R, sizeof...(Args), Args...&gt;(L, function, args...);
}
</code></pre>Now you have everything you need for an extensible Lua scripting implementation for your game engine, and even an interactive Lua console, all using LuaJIT. Good Luck!</p></div><hr><time itemprop=datePublished pubdate=pubdate datetime=2017-07-24T23:15:00+00:00><i class="fa-regular fa-clock fa-fw"></i>&nbsp;Published on <a href=https://erikmcclure.com/blog/integrating-luajit-and-autogenerating-c/>July 24, 2017 at 11:15pm</a></time><aside><a href=/blog/integrating-luajit-and-autogenerating-c/#comments><i class="fa-regular fa-comments fa-fw"></i>&nbsp;0 comments</a></aside><aside><i class="fa-regular fa-share-square fa-fw"></i>&nbsp;share:<ul><li><a href="javascript:window.open('https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ferikmcclure.com%2fblog%2fintegrating-luajit-and-autogenerating-c%2f','popup','width=600,height=400');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><path class="st0" d="M16.75 9H13.5V7a1 1 0 011-1h2V3H14a4 4 0 00-4 4V9H8v3h2v9h3.5V12H16z"/></svg></a><li><a href="javascript:window.open('https://twitter.com/intent/tweet?text=Integrating%20LuaJIT%20and%20Autogenerating%20C%20Bindings%20In%20Visual%20Studio&url=https%3a%2f%2ferikmcclure.com%2fblog%2fintegrating-luajit-and-autogenerating-c%2f','popup','width=600,height=256');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><path class="st0" opacity="0" d="M0 0h24v24H0z"/><path class="st0" d="M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572.0-4.658 2.086-4.658 4.66.0.364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342.0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.392.106-.803.162-1.227.162-.3.0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376.0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57.0 13.255-7.098 13.255-13.254.0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"/></svg></a></li><li><a href="javascript:window.open('https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2ferikmcclure.com%2fblog%2fintegrating-luajit-and-autogenerating-c%2f','popup','width=700,height=380');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><rect class="st0" height="11" width="4" x="3" y="9"/><circle class="st0" cx="5" cy="5" r="2"/><path class="st0" d="M16.5 8.25A4.47251 4.47251.0 0013 9.95343V9H9V20h4V13a2 2 0 014 0v7h4V12.75a4.5 4.5.0 00-4.5-4.5z"/></svg></a></li></ul></aside></article><article><h4><a href=/blog/discord-rise-of-bot-wars/>Discord: Rise Of The Bot Wars</a></h4><hr><div class=padding><p>The most surreal experience I ever had on discord was when someone PMed me to complain that my anti-spam bot wasn&rsquo;t working against a 200+ bot raid. I pointed out that it was never designed for large-scale attacks, and that discord&rsquo;s own rate-limiting would likely make it useless. He revealed he was selling spambot accounts at a rate of about $1 for 100 unique accounts and that he was being attacked by a rival spammer. My anti-spam bot had been dragged into a turf war between two spambot networks. We discussed possible mitigation strategies for worst-case scenarios, but agreed that most of them would involve false-positives and that discord showed no interest in fixing how exploitable their API was. I hoped that I would never have to implement such extreme measures into my bot.</p><p>Yesterday, our server was attacked by over 40 spambots, and after discord&rsquo;s astonishingly useless &ldquo;customer service&rdquo; response, I was forced to do exactly that.</p><h5 id=a-brief-history-of-discord-bots>A Brief History of Discord Bots</h5><p>Discord is built on a REST API, which was reverse engineered by late 2015 and used to make unofficial bots. To test out their bots, they would hunt for servers to &ldquo;raid&rdquo;, invite their bots to the server, then spam so many messages it would softlock the client, because discord still didn&rsquo;t have any rate limiting. Naturally, as the designated punching bags of the internet, furries/bronies/Twilight fans/slash fiction writers/etc. were among the first targets. The attack on our server was so severe it took us almost 5 minutes of wrestling with an unresponsive client to ban them. Ironically, a few of the more popular bots today, such as &ldquo;BooBot&rdquo;, are banned as a result of that attack, because the first thing the bot creator did was use it to raid our server.</p><p>I immediately went to work building an anti-spam bot that muted anyone sending more than 4 messages per second. Building a program in a hostile environment like this is much different from writing a desktop app or a game, because the bot had to be bulletproof - it had to rate-limit itself and could not be allowed to crash, <em>ever</em>. Any bug that allowed a user to crash the bot was treated as P0, because it could be used by an attacker to cripple the server. Despite using a very simplistic spam detection algorithm, this turned out to be highly effective. Of course, back then, discord didn&rsquo;t have rate limiting, or verification, or role hierarchies, or searching chat logs, or even a way to look up where your last ping was, so most spammers were probably not accustomed to having to deal with <em>any</em> kind of anti-spam system.</p><p>I added raid detection, autosilence, an isolation channel, and join alerts, but eventually we were targeted by a group from 4chan&rsquo;s /pol/ board. Because this was a sustained attack, they began crafting spam attacks timed just below the anti-spam threshold. This forced me to implement a much more sophisticated anti-spam system, using a heat algorithm with a linear decay rate, which is still in use today. This improved anti-spam system eventually made the /pol/ group give up entirely. I&rsquo;m honestly amazed the simplistic &ldquo;X messages in Y seconds&rdquo; approach worked as long as it did.</p><p>Of course, none of this can defend against a large scale attack. As I learned by my chance encounter with an actual spammer, it was getting easier and easier to amass an army of spambots to assault a channel instead of just using one or two.</p><h5 id=anatomy-of-a-modern-spambot-attack>Anatomy Of A Modern Spambot Attack</h5><p>At peak times (usually during summer break), our server gets raided 1-2 times <em>per day</em>. These minor raids are often just 2-3 tweens who either attempt to troll the chat, or use a basic user script to spam an offensive message. Roughly 60-70% of these raids are either painfully obvious or immediately trigger the anti-spam bot. About 20% of the raids involve slightly intelligent attempts to troll the chat by being annoying without breaking the rules, which usually take about 5-10 minutes to be &ldquo;exposed&rdquo;. About 5-10% of the raids are large, involving 8 or more people, but they are also very obvious and can be easily confined to an isolation channel. Problems arise, however, with large <em>spambot</em> raids. Below is a timeline of the recent spambot attack on our server:</p><div style=width:100%;height:150px;background:#dfdfdf;border-radius:3px><div style=padding:10px;height:125px;position:relative><div style=transform:rotate(90deg);position:absolute;left:-1em;top:65px>messages</div><div class=datachart style=display:flex;width:320px;height:100%;align-items:flex-end><div class=ychart style="flex-shrink:0;font-size:.8em;width:3em;height:100%;padding-right:.2em;border-right:solid 1px #999;display:flex;justify-content:space-between;flex-direction:column;align-items:flex-end"></div></div><div style=width:100%><div style="border-top:solid 1px #999;font-size:.8em;position:relative;margin-left:3.2em"><div style=position:absolute;left:0>19:41:25</div><div style=position:absolute;left:80px>19:41:45</div><div style=position:absolute;left:160px>19:42:05</div><div style=position:absolute;left:240px>19:42:25</div><div style=position:absolute;left:320px>19:42:45</div></div></div></div></div><p>This was a botched raid, but the bots that actually worked started spamming within 5 seconds of joining, giving the moderators a very narrow window to respond. The real problem, however, is that so many of them joined, the bot&rsquo;s API calls to add a role to silence them were rate-limited. They also sent messages once every 0.9 seconds, which is designed to get around Discord&rsquo;s rate limiting. This amounted to 33 messages sent every second, but it was difficult for the anti-spam to detect. Had the spambots reduced their spam cadence to 3 seconds or more, this attack could have bypassed the anti-spam detection <em>entirely</em>. My bot now instigates a lockdown by raising the verification level when a raid is detected, but it simply can&rsquo;t silence users fast enough to deal with hundreds of spambots, so at some point the moderators must use a mass ban function. Of course, banning is restricted by the global rate limit, because <strong><a href=https://discordapp.com/developers/docs/resources/guild#create-guild-ban>Discord has no mass ban API endpoint</a></strong>, but luckily the global rate limit is something like 50 requests per second, so if you&rsquo;re <em>only</em> banning people, you&rsquo;re probably okay.</p><p>However, a hostile attacker could sneak bots in one-by-one every 10 minutes or so, avoiding setting off the raid alarm, and then activate them all at once. 500 bots sending randomized messages chosen from an English dictionary once every 5 seconds after sneaking them in over a 48 hour period is the ultimate attack, and one that is almost impossible to defend against, because this also bypasses the 10-minute verification level. As a weapon of last resort, I added a command that immediately bans all users that sent their first message within the past two minutes, but, again, banning is subject to the <a href=https://discordapp.com/developers/docs/topics/rate-limits>global rate limit!</a> In fact, the rate limits can change at any time, and while message deletion has a higher rate limit for bots, bans don&rsquo;t.</p><p>The only other option is to disable the @everyone role from being able to speak on any channel, but you have to do this on a <em>per channel basis</em>, because Discord ignores you if you attempt to globally disable sending message permissions for @everyone. Even then, creating an &ldquo;approved&rdquo; role doesn&rsquo;t work because any automated assignment could be defeated by adding bots one by one. The only defense a small Discord server has is to require moderator approval for every single new user, which isn&rsquo;t a solution - you&rsquo;ve just given up having a public Discord server. It&rsquo;s only a matter of time until any angry 13-year-old can buy a sophisticated attack with a week&rsquo;s allowance. What will happen to public Discord servers then? Do we simply throw up our hands and admit that humanity is so awful we can&rsquo;t even have public communities anymore?</p><h5 id=the-discord-api-hates-you>The Discord API Hates You</h5><p>The rate-limits imposed on Discord API endpoints are exacerbated by temporary failures, and that&rsquo;s excluding network issues. Thus, if I attempt to set a silence role on a spammer that just joined, the API will repeatedly claim they do not exist. In fact, 3 separate API endpoints consistently fail to operate properly during a raid: A &ldquo;member joined&rdquo; event won&rsquo;t show up for several seconds, but if I fall back to calling <code>GetMember()</code>, this <em>also</em> claims the member doesn&rsquo;t exist, which means adding the role <em>also</em> fails! So I have to attempt to silence the user with every message they send until Discord actually adds the role, even though the API failures are also counted against the rate limit! This gets completely absurd once someone assaults your server with 1000 spambots, because this triggers all sorts of bottlenecks that normally aren&rsquo;t a problem. The alert telling you a user has joined? Rate limited. It&rsquo;ll take your bot 5-10 minutes to get through just <em>telling</em> you such a gigantic spambot army joined, unless you include code specifically designed to detect these situations and reduce the number of alerts. Because of this, a single user can trigger something like 5-6 API requests, all of which are counted against your global rate limit and can severely cripple a bot.</p><p>The general advice that is usually given here is &ldquo;just ban them&rdquo;, which is terrible advice because Discord&rsquo;s own awful message handling makes it incredibly easy to trigger a false positive. If a message fails to send, the client simply sends a completely new message, with it&rsquo;s own ID, and will continue re-sending the message until an Ack is received, at which point the user has probably send 3 or 4 copies of the same message, each of which have the same content, but completely unique IDs and timestamps, which looks <em>completely identical</em> to a spam attack.</p><p>Technically speaking, this is done because Discord assigns snowflake IDs server-side, so each message attempt sent by the client must have a unique snowflake assigned after it is sent. However, it can also be trivially fixed by adding an optional &ldquo;client ID&rdquo; field to the message, with a client-generated ID that stays the same if the message is resent due to a network failure. That way, the server (or the other clients) can simply drop any duplicate messages with identical client IDs while still ensuring all messages have unique IDs across their distributed cluster. This would single-handedly fix all duplicate messages across the entire platform, and eliminate almost every single false-positive I&rsquo;ve seen in my anti-spam bot.</p><h5 id=discord-doesnt-care>Discord Doesn&rsquo;t Care</h5><p>Sadly, Discord doesn&rsquo;t seem to care. The general advice in response to &ldquo;how do I defend against a large scale spam attack&rdquo; is &ldquo;just report them to us&rdquo;, so we did exactly that, and then got what has to be one of the dumbest customer service e-mails I&rsquo;ve ever seen in my life:</p><div class=imgwrap style=max-width:571px><a href=/img/res4.PNG target=_blank><img src=/img/res4.PNG alt="Discord Being Stupid" width=100%></a></div><p>Excuse me, <em><strong>WHAT?!</strong></em> Sorry about somebody spamming your service with horrifying gore images, but please don&rsquo;t delete them! What happens if the spammers just delete the messages themselves? What happens if they send <em>child porn?</em> &ldquo;Sorry guys, please ignore the images that are literally illegal to even look at, but we can&rsquo;t delete them because Discord is fucking stupid.&rdquo; Does Discord understand the concept of <em>marking messages for deletion</em> so they are viewable for a short time as evidence for law enforcement?! My anti-spam bot&rsquo;s database currently has more information than <em>Discord&rsquo;s own servers!</em> If this had involved child porn, the FBI would have had to ask <strong>me</strong> for <strong>my records</strong> because Discord would have deleted them all!</p><p>Obviously, we&rsquo;re not going to leave 500+ gore messages sitting in the chatroom while Discord&rsquo;s ass-backwards abuse team analyzes them. I just have to hope my own nuclear option can ban them quickly enough, or simply give up the entire concept of having a public Discord server.</p><p>The problem is that the armies of spambots that were once reserved for the big servers are now so easy and so trivial to make that they&rsquo;re beginning to target smaller servers, servers that don&rsquo;t have the resources or the means to deal with that kind of large scale DDoS attack. So instead, I have to fight the growing swarm alone, armed with only a crippled, rate-limited bot of my own, and hope the dragons flying overhead don&rsquo;t notice.</p><p>What the <em>fuck</em>, Discord.</p><script src=https://d3js.org/d3.v4.min.js></script>
<script>var data=[1,0,0,0,2,3,0,0,0,0,0,5,0,0,0,1,0,2,3,3,0,2,0,9,3,0,0,21,34,34,23,7,4,2,1,8,2,23,34,19,14,11,5,3,3,2,2,5,5,0,0,0,2,4,2,0,0,0,1,0,0,0,0,0,5,2,0,0,0,0,2,2,0,1,0,5,1,2,0,0,0,0,2,2,0,0,0,0,1,1],axis=[35,28,21,14,7,0];d3.select(".datachart").selectAll("div").data(data).enter().append("div").style("width","2px").style("margin-left","2px").style("flex-shrink","0").style("background","#7289DA").style("height",function(e){return e/axis[0]*100+"%"}),d3.select(".ychart").selectAll("div").data(axis).enter().append("div").style("flex-shrink","0").text(function(e){return e})</script></div><hr><time itemprop=datePublished pubdate=pubdate datetime=2017-06-24T08:40:00+00:00><i class="fa-regular fa-clock fa-fw"></i>&nbsp;Published on <a href=https://erikmcclure.com/blog/discord-rise-of-bot-wars/>June 24, 2017 at 8:40am</a></time><aside><a href=/blog/discord-rise-of-bot-wars/#comments><i class="fa-regular fa-comments fa-fw"></i>&nbsp;8 comments</a></aside><aside><i class="fa-regular fa-share-square fa-fw"></i>&nbsp;share:<ul><li><a href="javascript:window.open('https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ferikmcclure.com%2fblog%2fdiscord-rise-of-bot-wars%2f','popup','width=600,height=400');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><path class="st0" d="M16.75 9H13.5V7a1 1 0 011-1h2V3H14a4 4 0 00-4 4V9H8v3h2v9h3.5V12H16z"/></svg></a><li><a href="javascript:window.open('https://twitter.com/intent/tweet?text=Discord%3a%20Rise%20Of%20The%20Bot%20Wars&url=https%3a%2f%2ferikmcclure.com%2fblog%2fdiscord-rise-of-bot-wars%2f','popup','width=600,height=256');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><path class="st0" opacity="0" d="M0 0h24v24H0z"/><path class="st0" d="M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572.0-4.658 2.086-4.658 4.66.0.364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342.0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.392.106-.803.162-1.227.162-.3.0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376.0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57.0 13.255-7.098 13.255-13.254.0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"/></svg></a></li><li><a href="javascript:window.open('https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2ferikmcclure.com%2fblog%2fdiscord-rise-of-bot-wars%2f','popup','width=700,height=380');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><rect class="st0" height="11" width="4" x="3" y="9"/><circle class="st0" cx="5" cy="5" r="2"/><path class="st0" d="M16.5 8.25A4.47251 4.47251.0 0013 9.95343V9H9V20h4V13a2 2 0 014 0v7h4V12.75a4.5 4.5.0 00-4.5-4.5z"/></svg></a></li></ul></aside></article><article><h4><a href=/blog/programmers-should-take-linguistics/>Programmers Should Take Linguistics</a></h4><hr><div class=padding><p>The older I get, the more I realize that 90% of all disagreements or social drama results from a miscommunication of some kind. Every time I wind up having to resolve a dispute, I&rsquo;ll try to get both sides of the story, only to realize that they&rsquo;re the same story, and both parties were actually either in agreement or fighting over a perceived insult that never actually existed. Unsurprisingly, a disproportionate amount of this miscommunication often involves programmers being far too strict with their interpretations of what certain words mean.</p><p>A linguistics class teaches you about what a language actually is - a bunch of sounds that we mutually agree mean certain things. Language is, intrinsically, a social construct. The correct definition of a word is whatever the majority of your primary social circle thinks it is. However, this also means that if you interact with a secondary social circle, and they all think the word means something else, then whenever you interact with them, it really <em>does</em> mean something else. Language is inherently contextual, and the possible meanings of a word can change based on who is saying it and to whom they&rsquo;re saying it to. If everyone else on Earth has decided that &rsquo;literally&rsquo; can also mean &lsquo;figuratively&rsquo;, then it does, even if the dictionary says otherwise. It also means most people don&rsquo;t actually care if you say <em>jif</em> or <em>gif</em>, they&rsquo;ll just say whatever pronunciation gets you to shut up about it.</p><p>It&rsquo;s important to realize that a word&rsquo;s meaning is not defined by a dictionary, but rather by how people use it. The dictionary is simply a reflection of it&rsquo;s usage, and is generally a few years out of date. Just as the pronunciation of a word can vary by dialect, so can the potential meanings of a word. Meanings can be invented by regional subdialects and spread outward from there, which is the origin of many slang terms. Sometimes we invent entirely new words, like &ldquo;dubstep&rdquo;, but young words may have fuzzy definitions. In some dialects of electronic music listeners, &ldquo;dubstep&rdquo; is not actually a a specific genre, but instead refers to all electronic music. Using dubstep to refer to any electronic song is <em>currently</em> incorrect if used in general parlance, because most people think it is referring to a very specific kind of music. However, if this usage of the word continues to be popularized, eventually the meaning of the word will change into a synonym for electronica, and the dictionaries will be updated to reflect this.</p><p>The fluid nature of language is why prescriptive grammar is almost always unnecessary, unless you are deliberately conforming to a grammar standard for a specific medium, such as writing a story. In almost any other context, so long as everyone in your social group understands your &lsquo;dialect&rsquo; of English, then it is valid grammar. However, if you attempt to use this dialect outside of your social circle with people who are not familiar with it, you will once again be in the wrong, as they will have no idea what you&rsquo;re talking about. This, however, does not mean there are no mandatory grammar rules, it&rsquo;s just that most of the rules that are actually necessary to speak the language properly are usually so ingrained that you don&rsquo;t even think about them.</p><p>A fantastic example of this is a little known rule in English where all adjectives <em>must</em> come in a very specific order: <code>opinion-size-age-shape-color-origin-material-purpose Noun</code>. So you can have a lovely little old rectangular green French silver whittling knife, but if you switch the order of any of those adjectives you&rsquo;ll sound like a maniac. Conversely, you can never have a green great dragon. Despite the fact that this grammar rule is basically never talked about in any prescriptive grammar book, it is <em>mandatory</em> because if you don&rsquo;t follow it you won&rsquo;t be speaking proper English and people will have difficulty understanding you. True grammar rules are ones that, if not followed, result in nonsensical sentences that are difficult or impossible to parse correctly.</p><p>However, this does not mean all sentences that are difficult to understand have incorrect grammar. In fact, even some words are completely ambiguous <em>by default</em>. If I say I&rsquo;m &ldquo;dusting an object&rdquo;, the meaning of the phrase is completely dependent on what the object is. If it&rsquo;s a cake, I&rsquo;m probably dusting it with something. If it&rsquo;s a shelf, I&rsquo;m probably dusting it to get rid of the dust.</p><p>Programmers tend to be very literal minded people, and often like to think that language is a set of strict rules defined by their English class. In reality, language is a fluid, dynamic, ambiguous, constantly changing enigma that exists entirely because we all agree on what a bunch of sounds mean. We need to recognize this, and when we communicate to other people, we need to be on the lookout for potential misinterpretations of what we say, so we can provide clarifications when possible. If someone says something that seems ridiculous, ask them to clarify. I&rsquo;m tired of resolving disagreements that exist only because nobody stopped to ask the other side to clarify what they meant.</p><p>Stop demanding that everyone explain things in a way you&rsquo;ll understand. That&rsquo;s impossible, because everyone understands language slightly differently. Instead, ask for clarification if someone seems to be saying something unusual or before you debate a point they made. Maybe then we can keep the debates to <em>actual</em> disagreements, instead of arguing over communication failures.</p></div><hr><time itemprop=datePublished pubdate=pubdate datetime=2017-06-01T15:48:00+00:00><i class="fa-regular fa-clock fa-fw"></i>&nbsp;Published on <a href=https://erikmcclure.com/blog/programmers-should-take-linguistics/>June 1, 2017 at 3:48pm</a></time><aside><a href=/blog/programmers-should-take-linguistics/#comments><i class="fa-regular fa-comments fa-fw"></i>&nbsp;0 comments</a></aside><aside><i class="fa-regular fa-share-square fa-fw"></i>&nbsp;share:<ul><li><a href="javascript:window.open('https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ferikmcclure.com%2fblog%2fprogrammers-should-take-linguistics%2f','popup','width=600,height=400');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><path class="st0" d="M16.75 9H13.5V7a1 1 0 011-1h2V3H14a4 4 0 00-4 4V9H8v3h2v9h3.5V12H16z"/></svg></a><li><a href="javascript:window.open('https://twitter.com/intent/tweet?text=Programmers%20Should%20Take%20Linguistics&url=https%3a%2f%2ferikmcclure.com%2fblog%2fprogrammers-should-take-linguistics%2f','popup','width=600,height=256');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><path class="st0" opacity="0" d="M0 0h24v24H0z"/><path class="st0" d="M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572.0-4.658 2.086-4.658 4.66.0.364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342.0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.392.106-.803.162-1.227.162-.3.0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376.0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57.0 13.255-7.098 13.255-13.254.0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"/></svg></a></li><li><a href="javascript:window.open('https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2ferikmcclure.com%2fblog%2fprogrammers-should-take-linguistics%2f','popup','width=700,height=380');"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="twtr-icon twtr-color-fill--blue-dark has-hover"><style>.st0{fill:#666}</style><rect class="st0" height="11" width="4" x="3" y="9"/><circle class="st0" cx="5" cy="5" r="2"/><path class="st0" d="M16.5 8.25A4.47251 4.47251.0 0013 9.95343V9H9V20h4V13a2 2 0 014 0v7h4V12.75a4.5 4.5.0 00-4.5-4.5z"/></svg></a></li></ul></aside></article><div class=pager><ul><li><a href=/blog/page/5>Newer</a></li><li style=text-align:center><a href=/blog/>Home</a></li><li style=text-align:right><a href=/blog/page/7>Older</a></li></ul></div></section><section class=archive><article><img src=https://erikmcclure.com/img/avatar.th.png alt=Avatar width=180 height=180><h2>Archive</h2><ol><li><details><summary>2024</summary><ul><li><a href=/blog/we-could-fix-everything-we-just-dont/>We Could Fix Everything, We Just Don't</a></li></ul></details></li><li><details><summary>2023</summary><ul><li><a href=/blog/people-cant-care-about-everything/>People Can't Care About Everything</a></li><li><a href=/blog/discord-should-remove-usernames/>Discord Should Remove Usernames Entirely</a></li><li><a href=/blog/age-of-bullshit/>Welcome to the Age of Bullshit</a></li><li><a href=/blog/nuerodivergents-will-inherit-the-earth/>Neurodivergents Will Inherit The Earth</a></li></ul></details></li><li><details><summary>2022</summary><ul><li><a href=/blog/money-is-fake/>Money Is Fake. It's Not Real. It's Made Up.</a></li><li><a href=/blog/we-need-new-motherboards/>We Need New Motherboards Before GPUs Collapse Under Their Own Gravity</a></li><li><a href=/blog/never-respect-my-elders-after-what-they-did/>I'll Never Respect My Elders After What They've Done</a></li><li><a href=/blog/camp-vista/>Camp Vista - Growing Up Next To Microsoft</a></li></ul></details></li><li><details><summary>2021</summary><ul><li><a href=/blog/blockchain-new-javascript/>Blockchain Is The New JavaScript</a></li><li><a href=/blog/cpp-constructors-memory-and-lifetimes/>C++ Constructors, Memory, and Lifetimes</a></li><li><a href=/blog/factorio-is-best-interview-we-have/>Factorio Is The Best Technical Interview We Have</a></li></ul></details></li><li><details><summary>2020</summary><ul><li><a href=/blog/why-you-cant-use-prebuilt-llvm-with-cpp17/>Why You Can't Use Prebuilt LLVM 10.0 with C++17</a></li><li><a href=/blog/someone-is-stealing-tracker-songs/>Someone Is Stealing Tracker Songs And Selling Them</a></li><li><a href=/blog/pressure-based-anti-spam-for-discord-bots/>Pressure Based Anti-Spam for Discord Bots</a></li></ul></details></li><li><details><summary>2019</summary><ul><li><a href=/blog/name-shadowing-should-be-an-operator/>Name Shadowing Should Be An Operator</a></li><li><a href=/blog/a-rant-on-terra/>A Rant On Terra</a></li><li><a href=/blog/risc-is-fundamentally-unscalable/>RISC Is Fundamentally Unscalable</a></li></ul></details></li><li><details><summary>2018</summary><ul><li><a href=/blog/software-engineering-is-bad-but-it-s-not-that-bad/>Software Engineering Is Bad, But That's Not Why</a></li><li><a href=/blog/why-do-people-use-the-wrong-email-/>Why Do People Use The Wrong Email?</a></li><li><a href=/blog/software-optimizes-to-single-points-of-failure/>Software Optimizes to Single Points of Failure</a></li><li><a href=/blog/migrating-to-static-blog/>Migrating To A Static Blog</a></li><li><a href=/blog/how-to-avoid-memorizing-times-tables/>How To Avoid Memorizing Times Tables</a></li></ul></details></li><li><details><summary>2017</summary><ul><li><a href=/blog/ignoring-outliers-creates-racist/>Ignoring Outliers Creates Racist Algorithms</a></li><li><a href=/blog/i-used-to-want-to-work-for-google/>I Used To Want To Work For Google</a></li><li><a href=/blog/sexist-programmers-are-awful-engineers/>Sexist Programmers Are Awful Engineers</a></li><li><a href=/blog/why-i-never-built-my-soundcloud-killer/>Why I Never Built My SoundCloud Killer</a></li><li><a href=/blog/integrating-luajit-and-autogenerating-c/>Integrating LuaJIT and Autogenerating C Bindings In Visual Studio</a></li><li><a href=/blog/discord-rise-of-bot-wars/>Discord: Rise Of The Bot Wars</a></li><li><a href=/blog/programmers-should-take-linguistics/>Programmers Should Take Linguistics</a></li><li><a href=/blog/companies-cant-be-apolitical/>Companies Can't Be Apolitical</a></li><li><a href=/blog/i-cant-hear-anything-below-80-hz/>I Can't Hear Anything Below 80 Hz*</a></li><li><a href=/blog/windows-wont-let-my-program-crash/>Windows Won't Let My Program Crash</a></li><li><a href=/blog/directx-is-terrifying/>DirectX Is Terrifying</a></li><li><a href=/blog/our-software-is-beacon-of-hope/>Our Software Is a Beacon of Hope</a></li></ul></details></li><li><details><summary>2016</summary><ul><li><a href=/blog/everyone-does-srgb-wrong-because/>Everyone Does sRGB Wrong Because Everyone Else Does sRGB Wrong</a></li><li><a href=/blog/mathematical-notation-is-awful/>Mathematical Notation Is Awful</a></li><li><a href=/blog/the-gpl-is-usually-overkill/>The GPL Is Usually Overkill</a></li><li><a href=/blog/the-right-to-ignore-difference-between/>The Right To Ignore: The Difference Between Free Speech And Harassment</a></li></ul></details></li><li><details><summary>2015</summary><ul><li><a href=/blog/there-will-never-be-one-true/>There Will Never Be One True Programming Language</a></li><li><a href=/blog/abortion-has-no-moral-high-ground/>Abortion Has No Moral High Ground</a></li><li><a href=/blog/i-tried-to-install-linux-and-now-i/>I Tried To Install Linux And Now I Regret Everything</a></li><li><a href=/blog/you-arent-designing-software-for-robots/>We Aren't Designing Software For Robots</a></li><li><a href=/blog/using-data-to-balance-your-game-pony/>Using Data To Balance Your Game: Pony Clicker Analysis</a></li><li><a href=/blog/is-there-commercial-open-source-license/>Is There A Commercial Open Source License?</a></li><li><a href=/blog/does-anyone-actually-want-good-software/>Does Anyone Actually Want Good Software?</a></li><li><a href=/blog/why-dont-you-just-fire-them/>Why Don't You Just Fire Them?</a></li></ul></details></li><li><details><summary>2014</summary><ul><li><a href=/blog/how-not-to-sell-software/>How Not To Install Software</a></li><li><a href=/blog/not-reinventing-wheel-is-anticompetitive/>Never Reinventing The Wheel Is Anticompetitive</a></li><li><a href=/blog/everyone-can-be-above-average/>Everyone Can Be Above Average</a></li><li><a href=/blog/can-we-choose-what-we-enjoy/>Can We Choose What We Enjoy?</a></li><li><a href=/blog/how-to-make-your-profiler-10x-faster/>How To Make Your Profiler 10x Faster</a></li><li><a href=/blog/the-problem-with-photorealism/>The Problem With Photorealism</a></li><li><a href=/blog/success-is-relative/>Success Is Relative</a></li></ul></details></li><li><details><summary>2013</summary><ul><li><a href=/blog/googles-decline-really-bugs-me/>Google's Decline Really Bugs Me</a></li><li><a href=/blog/the-educational-imbroglio/>The Educational Imbroglio</a></li><li><a href=/blog/the-ladder-climbing-generation/>The Ladder-Climbing Generation</a></li><li><a href=/blog/the-microsoft-word-problem/>The Microsoft Word Problem</a></li><li><a href=/blog/write-less-code/>Write Less Code</a></li><li><a href=/blog/most-people-have-shitty-computers/>Most People Have Shitty Computers</a></li><li><a href=/blog/leap-motion-impressions-input/>Leap Motion Impressions, Input Sanitation, and 3D Gesture Ideas</a></li><li><a href=/blog/aurora-theory-released/>Aurora Theory Released!</a></li><li><a href=/blog/what-i-learned-in-college/>What I Learned In College</a></li><li><a href=/blog/how-to-complain-about-men-and-be-sexist/>How To Complain About Men And Be Sexist At The Same Time</a></li><li><a href=/blog/course-notes/>Course Notes</a></li><li><a href=/blog/contact/>Contact</a></li><li><a href=/blog/the-dark-side-of-htmlcss/>The Dark Side of Web Development</a></li><li><a href=/blog/windows-breaks-assert-inside/>Windows Breaks assert() Inside WM_CANCELMODE</a></li><li><a href=/blog/dreams-are-worth-fighting-for/>Dreams Are Worth Fighting For</a></li><li><a href=/blog/the-productivity-fallacy/>The Productivity Fallacy</a></li><li><a href=/blog/the-earbud-loudness-wars/>The Earbud Loudness Wars</a></li></ul></details></li><li><details><summary>2012</summary><ul><li><a href=/blog/giant-list-of-free-samples/>Giant List of FREE SAMPLES</a></li><li><a href=/blog/the-weekend-apelsin-got-lost-all-time/>The Weekend I Got Lost All The Time</a></li><li><a href=/blog/c-to-c-tutorial-part-4-operator-overload/>C# to C++ Tutorial - Part 4: Operator Overload</a></li><li><a href=/blog/7-problems-raytracing-doesnt-solve/>7 Problems Raytracing Doesn't Solve</a></li><li><a href=/blog/teenage-rebellion-as-failure-of-society/>Teenage Rebellion as a Failure of Society</a></li><li><a href=/blog/analyzing-xkcd-click-and-drag/>Analyzing XKCD: Click and Drag</a></li><li><a href=/blog/what-is-right-answer/>What Is A Right Answer?</a></li><li><a href=/blog/coordinate-systems-and-cascading/>Coordinate Systems And Cascading Stupidity</a></li><li><a href=/blog/how-joysticks-ruined-my-graphics-engine/>How Joysticks Ruined My Graphics Engine</a></li><li><a href=/blog/properly-dreaming-about-success/>Properly Dreaming About Success</a></li><li><a href=/blog/multithreading-problems-in-game-design/>Multithreading Problems In Game Design</a></li><li><a href=/blog/ip-law-makes-you-asshole/>IP Law Makes You an Asshole</a></li><li><a href=/blog/stop-following-rules/>Stop Following The Rules</a></li><li><a href=/blog/standards-problem/>The Standards Problem</a></li><li><a href=/blog/an-evidence-based-refutation-of-the-project-glass-parodies/>An evidence-based refutation of the Project Glass parodies</a></li><li><a href=/blog/language-wars-are-pointless/>Language Wars Are Pointless</a></li><li><a href=/blog/why-windows-8-does-right-thing-wrong/>Why Windows 8 Does The Right Thing The Wrong Way</a></li><li><a href=/blog/well-that-was-interesting/>Well That Was Interesting</a></li><li><a href=/blog/visual-studio-broke-my-computer/>Visual Studio Broke My Computer</a></li><li><a href=/blog/hiring-wrong-people/>Hiring the Wrong People</a></li><li><a href=/blog/chill-out/>Chill Out</a></li><li><a href=/blog/implicit-ui-design/>Implicit UI Design</a></li><li><a href=/blog/linux-mint-12-kde/>Linux Mint 12 KDE</a></li><li><a href=/blog/new-post/>'Programmer' is an Overgeneralization</a></li><li><a href=/blog/wikipedias-identity-crisis/>Wikipedia's Identity Crisis</a></li></ul></details></li><li><details><summary>2011</summary><ul><li><a href=/blog/your-esoteric-language-is-useless/>Your Esoteric Language is Useless</a></li><li><a href=/blog/great-mystery-of-linear-gradient/>The Great Mystery of Linear Gradient Lighting</a></li><li><a href=/blog/signed-integers-considered-stupid-like/>Signed Integers Considered Stupid (Like This Title)</a></li><li><a href=/blog/why-kids-hate-math/>Why Kids Hate Math</a></li><li><a href=/blog/importance-of-importance/>Don't Work on Someone Else's Dream</a></li><li><a href=/blog/c-to-c-tutorial-part-3-classes-and/>C# to C++ Tutorial - Part 3: Classes and Structs and Inheritance (OH MY!)</a></li><li><a href=/blog/problem-of-vsync/>The Problem of Vsync</a></li><li><a href=/blog/musical-genres/>Musical Genres</a></li><li><a href=/blog/c-to-c-tutorial-part-2-pointers/>C# to C++ Tutorial - Part 2: Pointers Everywhere!</a></li><li><a href=/blog/radians-explanation/>Radians: An explanation</a></li><li><a href=/blog/c-to-c-tutorial-part-1-basics-of-syntax/>C# to C++ Tutorial - Part 1: Basics of Syntax</a></li><li><a href=/blog/on-hackers/>On Hacking (or Why We Need Security Ratings)</a></li><li><a href=/blog/my-mom-had-heart-attack/>My Mom Had a Heart Attack</a></li><li><a href=/blog/religion-problem-perspectives/>The Religion Problem: Perspectives</a></li><li><a href=/blog/ninth-circle-of-bugs/>The Ninth Circle of Bugs</a></li><li><a href=/blog/save-rss/>Save RSS</a></li><li><a href=/blog/college-is-broken/>College Is Broken</a></li><li><a href=/blog/outside-perspective-on-psn-fiasco/>An Outside Perspective on the PSN Fiasco</a></li><li><a href=/blog/future-predictions/>Future Predictions</a></li><li><a href=/blog/investigating-low-level-cpu-performance/>Investigating Low-level CPU Performance</a></li><li><a href=/blog/bullying-never-stops/>The Bullying Never Stops</a></li></ul></details></li><li><details><summary>2010</summary><ul><li><a href=/blog/aquaria-hints/>Aquaria Hints</a></li><li><a href=/blog/im-failure/>The IM Failure</a></li><li><a href=/blog/how-to-train-your-dragon/>How To Train Your Dragon</a></li><li><a href=/blog/album-for-sale-renascent/>Album For Sale! [Renascent]</a></li><li><a href=/blog/wavsaver/>WavSaver</a></li><li><a href=/blog/pixel-perfect-hit-testing/>Pixel Perfect Hit Testing</a></li><li><a href=/blog/fractal-cycle-screensaver/>Fractal Cycle Screensaver</a></li><li><a href=/blog/8-bit-color-cycling/>8-bit color cycling</a></li><li><a href=/blog/physics-networking/>Physics Networking</a></li><li><a href=/blog/assembly-cas-implementation/>Assembly CAS implementation</a></li><li><a href=/blog/function-pointer-speed/>Function Pointer Speed</a></li><li><a href=/blog/most-bizarre-error-ever/>Most Bizarre Error Ever</a></li><li><a href=/blog/floating-point-preformance/>Floating Point Preformance</a></li><li><a href=/blog/watch-this-now/>Watch This Now</a></li></ul></details></li><li><details><summary>2009</summary><ul><li><a href=/blog/physics-oriented-network-interpolation/>Physics-oriented Network Interpolation</a></li><li><a href=/blog/proving-strong-ai/>Proving Strong AI</a></li><li><a href=/blog/i-now-have-lj/>I now have an LJ</a></li></ul></details></li></ol></article></section></main><footer><p><span>Copyright &copy;2024 Erik McClure</span> <a href=https://erikmcclure.com/sitemap.xml>Sitemap</a> | <a href=https://erikmcclure.com/blog/index.xml>RSS Feed</a></p></footer></div><script>"use strict";window.onload=function(){e=document.getElementsByClassName("math");for(var e,t=0,n=e.length;t<n;t++)renderMathInElement(e[t],{delimiters:[{left:"$$",right:"$$",display:!1},{left:"\\[",right:"\\]",display:!0}]})}</script></body></html>